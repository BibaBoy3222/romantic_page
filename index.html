<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>–î–ª—è —Ç–µ–±—è üíñ</title>
  <meta name="theme-color" content="#ff6aa6">
  <style>
    /* Reset & base */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "SF Pro", Arial, sans-serif;
      background: radial-gradient(1200px 600px at 70% -10%, #ffe2ef 0%, #ffd3e7 30%, #ffeef6 60%, #fff 100%), #fff;
      color: #2b1b28;
      overflow-x: hidden;
    }

    /* Floating hearts background (CSS-only) */
    .heart {
      position: fixed; left: var(--x); top: var(--y);
      width: var(--size); height: var(--size);
      background:
        radial-gradient(circle at 30% 30%, #ff6aa6 35%, #ff3d88 36% 60%, transparent 61%) top left/50% 50% no-repeat,
        radial-gradient(circle at 70% 30%, #ff6aa6 35%, #ff3d88 36% 60%, transparent 61%) top right/50% 50% no-repeat,
        radial-gradient(90% 130% at 50% 0%, #ff6aa6 40%, #ff3d88 41% 60%, transparent 61%) bottom/100% 60% no-repeat;
      filter: drop-shadow(0 6px 12px rgba(255,61,136,.25));
      opacity: .75;
      transform: translate(-50%, -50%) rotate(0deg);
      animation: float var(--dur) linear infinite, spin var(--dur) linear infinite;
      pointer-events: none;
      z-index: 1;
    }
    @keyframes float {
      0% { transform: translate(-50%, calc(-50% + 20px)) rotate(0deg); opacity: .1; }
      15% { opacity: .9; }
      100% { transform: translate(-50%, calc(-50% - 120vh)) rotate(10deg); opacity: 0; }
    }
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Layout */
    .wrap {
      position: relative;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: clamp(16px, 4vw, 40px);
      z-index: 2;
    }
    .card {
      width: min(820px, 94vw);
      border-radius: 28px;
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,106,166,.25);
      box-shadow:
        0 10px 30px rgba(255, 61, 136, .15),
        inset 0 0 0 1px rgba(255,255,255,.4);
      padding: clamp(16px, 4vw, 32px);
    }
    .tag {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ff6aa6, #ff8dbb);
      color: #fff;
      letter-spacing: .3px;
      box-shadow: 0 8px 16px rgba(255,106,166,.25);
    }
    h1 {
      margin: 14px 0 8px;
      font-size: clamp(28px, 4.2vw, 44px);
      line-height: 1.1;
    }
    p.lead {
      margin: 0 0 18px;
      font-size: clamp(16px, 2.2vw, 20px);
      color: #5b3a52;
    }

    .actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin: 18px 0 8px;
    }
    .btn {
      border: 0;
      border-radius: 16px;
      padding: 14px 18px;
      font-size: 16px;
      background: #2b1b28;
      color: #fff;
      cursor: pointer;
      transition: transform .14s ease, box-shadow .14s ease, background .2s ease;
      box-shadow: 0 8px 18px rgba(43,27,40,.25);
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 12px 24px rgba(43,27,40,.25); }
    .btn:active { transform: translateY(0); box-shadow: 0 6px 12px rgba(43,27,40,.25); }

    .btn-pink {
      background: linear-gradient(90deg, #ff6aa6, #ff8dbb);
      box-shadow: 0 10px 20px rgba(255,106,166,.35);
    }

    .panel {
      margin-top: 18px;
      border-radius: 20px;
      background: #fff;
      border: 1px solid rgba(255,106,166,.2);
      padding: 16px;
      display: none;
    }
    .panel.show { display: block; animation: pop .25s ease; }
    @keyframes pop { from { transform: scale(.98); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .typewriter {
      font-size: clamp(16px, 2.4vw, 20px);
      line-height: 1.6;
      white-space: pre-line;
      min-height: 5lh;
    }

    .gallery {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  padding-bottom: 10px;
  -webkit-overflow-scrolling: touch;
}
    .gallery::-webkit-scrollbar { height: 8px; }
    .gallery::-webkit-scrollbar-thumb { background: #ffd3e7; border-radius: 999px; }
    .slide {
  flex: 0 0 88%;
  scroll-snap-align: center;
  border-radius: 18px;
  border: 1px solid rgba(255,106,166,.25);
  box-shadow: 0 6px 16px rgba(255,61,136,.12);
  aspect-ratio: 4/5;
  object-fit: cover;
  width: 100%;
  user-select: none;
}

    .footer {
      margin-top: 18px;
      font-size: 13px;
      color: #8d6a80;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .switch {
      display: inline-flex; align-items: center; gap: 8px;
      font-size: 14px; color: #5b3a52;
    }
    .switch input { accent-color: #ff6aa6; width: 18px; height: 18px; }

    /* Confetti canvas */
    #confetti { position: fixed; inset: 0; pointer-events: none; z-index: 5; }

    /* Safe area for iOS */
    .safe { padding-bottom: env(safe-area-inset-bottom); }
  
@media (min-width: 640px) {
  .slide { flex-basis: 60%; }
}
@media (min-width: 980px) {
  .slide { flex-basis: 30%; }
}

/* Lightbox */
.lightbox {
  position: fixed; inset: 0; z-index: 50;
  background: rgba(0,0,0,.85);
  display: grid; place-items: center;
  padding: 16px;
}
.lightbox[hidden] { display: none; }
.lightbox__img {
  max-width: 100%;
  max-height: 85vh;
  border-radius: 16px;
  box-shadow: 0 12px 36px rgba(0,0,0,.5);
}
.lightbox__btn {
  position: absolute; top: 50%; transform: translateY(-50%);
  background: rgba(255,255,255,.15);
  border: 1px solid rgba(255,255,255,.25);
  color: #fff; padding: 10px 14px; border-radius: 12px;
  cursor: pointer; user-select: none;
  backdrop-filter: blur(6px);
}
.lightbox__btn:hover { background: rgba(255,255,255,.25); }
.lightbox__prev { left: 10px; }
.lightbox__next { right: 10px; }
.lightbox__close { top: 12px; right: 12px; transform: none; }
.lightbox__counter {
  position: absolute; bottom: 14px; left: 50%; transform: translateX(-50%);
  color: #fff; font-size: 14px; opacity: .9;
  background: rgba(255,255,255,.15);
  padding: 6px 10px; border-radius: 10px;
  border: 1px solid rgba(255,255,255,.25);
}

</style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <!-- floating hearts (generated by JS) -->

  <div class="wrap">
    <div class="card safe">
      <span class="tag">–î–ª—è —Ç–µ–±—è <span aria-hidden="true">üíñ</span></span>
      <h1>–ü—Ä–∏–≤–µ—Ç, –º–æ—è <span style="color:#ff3d88">–ª—é–±–∏–º–∞—è</span>!</h1>
      <p class="lead">–Ø —Å–¥–µ–ª–∞–ª –º–∞–ª–µ–Ω—å–∫–∏–π —Å—é—Ä–ø—Ä–∏–∑. –ù–∞–∂–∏–º–∞–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ ‚Äî –∏ —Å–º–æ—Ç—Ä–∏, —á—Ç–æ —Å–ª—É—á–∏—Ç—Å—è ü•∞</p>

      <div class="actions">
        <button class="btn btn-pink" id="btn-reveal">–û—Ç–∫—Ä—ã—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ</button>
        <button class="btn" id="btn-confetti">–ë—É–º —Å—á–∞—Å—Ç—å—è ‚ú®</button>
        <button class="btn" id="btn-share">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
      </div>

      <div class="panel" id="panel-letter" aria-live="polite">
        <div class="typewriter" id="typed"></div>
      </div>

      <div class="panel" id="panel-photos">
  <div class="gallery" id="gallery"></div>
</div>

<div class="lightbox" id="lightbox" hidden>
  <img class="lightbox__img" id="lightboxImg" alt="photo">
  <button class="lightbox__btn lightbox__prev" id="lbPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ">‚ü®</button>
  <button class="lightbox__btn lightbox__next" id="lbNext" aria-label="–°–ª–µ–¥—É—é—â–µ–µ">‚ü©</button>
  <button class="lightbox__btn lightbox__close" id="lbClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
  <div class="lightbox__counter" id="lbCounter"></div>
</div>
      </div>

      <div class="footer">
        <label class="switch">
          <input type="checkbox" id="music-toggle" />
          –ú—É–∑—ã–∫–∞ (–ª–∞–π—Ç)
        </label>
        <small>–° –ª—é–±–æ–≤—å—é –∏ –∑–∞–±–æ—Ç–æ–π, –ê—Ä—Ç—ë–º)) üíå</small>
      </div>
    </div>
  </div>

  <audio id="music" loop>
    <source src="Daniil_Kim_-_komety_(SkySound.cc).mp3" type="audio/mp3">
  </audio>


  <script>
    // --- Config: —Ç—É—Ç –º–µ–Ω—è–π —Ç–µ–∫—Å—Ç –∏ –ø–æ–¥–ø–∏—Å–∏ ---
    const LETTER_TEXT = `
–¢—ã ‚Äî —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å.
–° —Ç–æ–±–æ–π —è –º–µ–Ω—è–ª—Å—è –≤ –ª—É—á—à—É—é —Å—Ç–æ—Ä–æ–Ω—É, –Ω–µ –≤–∫—É—Å–Ω–∞—è –µ–¥–∞ - —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –ª—É—á—à–µ–π –µ–¥–æ–π –≤ –∂–∏–∑–Ω–∏.

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ –≤—ã–±—Ä–∞–ª–∞ –º–µ–Ω—è.
–Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π –∏ —Ç–µ–º —á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å.
–í—Å–µ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂—É –≤ —Ç–≤–æ–∏—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö –∏–ª–∏ –ø–ª–∞–Ω–∞—Ö - —Ç—ã 100% –¥–æ–±—å–µ—à—å—Å—è —Ç–æ–≥–æ —á—Ç–æ —Ö–æ—á–µ—à—å.

–ë—ã–ª–æ –º–Ω–æ–≥–æ –≥—Ä—É—Å—Ç–Ω–æ–≥–æ, –Ω–æ —Ç–∞–∫ –∂–µ –∏ –º–Ω–æ–≥–æ —Ä–∞–¥–æ—Å—Ç–∏, –≥–¥–µ-—Ç–æ —Å—Å–æ—Ä—ã –∏ –Ω–µ–¥–æ–ø–æ–Ω–∏–º–∞–Ω–∏—è,
–Ω–æ —è –ø—Ä–∞–≤–¥–∞ –æ—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤ –≤ –ª—é–±—ã—Ö —ç—Ç–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö, —Ç—ã —Å–∫–∞–∑–∞–ª–∞ —á—Ç–æ –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—à—å —Å—á–∞—Å—Ç—å—è
–∞ –¥–ª—è –º–µ–Ω—è —Å—á–∞—Å—Ç—å–µ - —ç—Ç–æ –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –∏–∑ –º–∏–ª–ª–∏–∞—Ä–¥–∞ –¥—Ä—É–≥–∏—Ö –≤—ã–±—Ä–∞–ª –∏–º–µ–Ω–Ω–æ —Ç–µ–±—è
–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å –Ω–µ —Å–º–æ—Ç—Ä—è –Ω–∏ –Ω–∞ —á—Ç–æ, –≤ –≥—Ä—É—Å—Ç–∏, —Ä–∞–¥–æ—Å—Ç–∏, –ø–µ—á–∞–ª–∏ - –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ–±—è.

–Ø –Ω–µ –∑–Ω–∞—é –∫–∞–∫ —Å–ª–æ–∂–∞—Ç—Å—è –Ω–∞—à–∏ –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º, –Ω–æ —è –±—ã–ª –±—ã –≥–æ—Ç–æ–≤
–±–æ—Ä–æ—Ç—å—Å—è –∑–∞ –ª—é–±—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–±—è, –∏–Ω–æ–≥–¥–∞ –≤ –∂–∏–∑–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª—é–¥–∏
–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ –¥–∞—é—Ç—Å—è —Ç–µ–±–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∂–∏–∑–Ω–∏, –∏ –µ—Å–ª–∏ —Ç—ã –º–Ω–µ –¥–∞–ª–∞—Å—å –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∂–∏–∑–Ω–∏
—è –ø—Ä–æ–π–¥—É —á–µ—Ä–µ–∑ –º–Ω–æ–≥–æ–µ –ª–∏—à—å –±—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ä—è–¥–æ–º.

–õ—é–±–ª—é –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ. üíó
    `.trim();

    const PHOTO_CAPTIONS = [
      "–ù–∞—à –¥–µ–Ω—å ‚Ññ1", "–ù–∞—à –º–æ–º–µ–Ω—Ç", "–ù–∞—à–∞ —É–ª—ã–±–∫–∞", "–ù–∞—à–∏ –ø–ª–∞–Ω—ã", "–ù–∞—à –¥–µ–Ω—å ‚Ññ5"
    ];

    // --- Hearts field ---
    function spawnHearts() {
      const count = Math.min(40, Math.max(20, Math.floor(window.innerWidth/30)));
      for (let i=0; i<count; i++) {
        const d = document.createElement('div');
        d.className = 'heart';
        d.style.setProperty('--x', Math.random()*100 + 'vw');
        d.style.setProperty('--y', (100 + Math.random()*40) + 'vh');
        d.style.setProperty('--size', (10 + Math.random()*22) + 'px');
        d.style.setProperty('--dur', (10 + Math.random()*16) + 's');
        document.body.appendChild(d);
        setTimeout(()=>d.remove(), (10+16)*1000);
      }
      // respawn
      setTimeout(spawnHearts, 2000 + Math.random()*2000);
    }
    spawnHearts();

    // --- Typewriter effect ---
    function typeText(el, text, speed=26) {
      el.textContent = "";
      let i = 0;
      const tick = () => {
        el.textContent += text[i];
        i++;
        if (i < text.length) setTimeout(tick, text[i-1] === '\n' ? 160 : speed);
      };
      tick();
    }

    // --- Panels
    const panelLetter = document.getElementById('panel-letter');
    const typedEl = document.getElementById('typed');
    const panelPhotos = document.getElementById('panel-photos');

document.getElementById('btn-reveal').addEventListener('click', () => {
  panelLetter.classList.add('show');
  typeText(typedEl, LETTER_TEXT);
  panelPhotos.classList.add('show');
  launchConfetti(120);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É
  const music = document.getElementById('music');
  music.volume = 0.25;
  music.play().catch(err => console.log("–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:", err));
  document.getElementById('music-toggle').checked = true;
});

    // --- Confetti ---
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');
    let confettiPieces = [];
    function resize() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize); resize();

    function launchConfetti(n=100) {
      for (let i=0; i<n; i++) {
        confettiPieces.push({
          x: Math.random()*confettiCanvas.width,
          y: -10,
          w: 6 + Math.random()*6,
          h: 10 + Math.random()*10,
          s: 2 + Math.random()*3,
          r: Math.random()*Math.PI,
          rv: (Math.random()-.5)*0.2,
          hue: 330 + Math.random()*40, // pinks
        });
      }
    }

    function step() {
      ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      confettiPieces.forEach(p => {
        p.y += p.s;
        p.r += p.rv;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.r);
        ctx.fillStyle = `hsl(${p.hue}deg 90% 70%)`;
        ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
        ctx.restore();
      });
      confettiPieces = confettiPieces.filter(p => p.y < confettiCanvas.height + 20);
      requestAnimationFrame(step);
    }
    step();

    document.getElementById('btn-confetti').addEventListener('click', () => launchConfetti(160));

    // --- Share ---
    document.getElementById('btn-share').addEventListener('click', async () => {
      const data = {
        title: "–î–ª—è —Ç–µ–±—è üíñ",
        text: "–û—Ç–∫—Ä–æ–π –º–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ!",
        url: location.href
      };
      if (navigator.share) {
        try { await navigator.share(data); } catch {}
      } else {
        navigator.clipboard?.writeText(location.href);
        alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞. –û—Ç–ø—Ä–∞–≤—å –µ—ë –ª—é–±–∏–º–æ–π üíó");
      }
    });
  // --- Photos: slider render + lightbox ---
  const PHOTOS = [
    { src: "–Ω–∞—à–∞ –ø–µ—Ä–≤–∞—è —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è –∂–∏–∑–Ω—å.jpg", caption: "–ù–∞—à–∞ –ø–µ—Ä–≤–∞—è —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è –∂–∏–∑–Ω—å" },
    { src: "–Ω–æ–≤–∞—è —Å–æ–±–∞–∫–∞ –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏.jpg", caption: "–Ω–æ–≤–∞—è —Å–æ–±–∞–∫–∞ –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏" },
    { src: "—Å–æ—Ñ–∞ –∫—É—à–∞–µ—Ç –∫–æ–Ω—Ñ–µ—Ç—ã.jpg", caption: "—Å–æ—Ñ–∞ –∫—É—à–∞–µ—Ç –∫–æ–Ω—Ñ–µ—Ç—ã" },
    { src: "—Ç—É—Ç —è –æ—Ç–¥—ã—Ö–∞–ª.jpg", caption: "—Ç—É—Ç —è –æ—Ç–¥—ã—Ö–∞–ª" },
    { src: "–Ω–∞ —ç—Ç–æ–º –º–µ—Å—Ç–µ —è –¥–æ—Å—Ç–∞–≤–∞–ª —Ç–µ–±—è —Å–≤–æ–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.jpg", caption: "–Ω–∞ —ç—Ç–æ–º –º–µ—Å—Ç–µ —è –¥–æ—Å—Ç–∞–≤–∞–ª —Ç–µ–±—è —Å–≤–æ–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏" },
    { src: "—Ç—É—Ç —è –µ—â–µ –Ω–µ –æ—Å–æ–∑–Ω–∞–≤–∞–ª –∫–æ–≥–æ —Ç–µ—Ä—è—é.jpg", caption: "—Ç—É—Ç —è –µ—â–µ –Ω–µ –æ—Å–æ–∑–Ω–∞–≤–∞–ª –∫–æ–≥–æ —Ç–µ—Ä—è—é" },
    { src: "—Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ –Ω–∞ —Å–≤–µ—Ç–µ.jpg", caption: "—Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ –Ω–∞ —Å–≤–µ—Ç–µ" },
    { src: "–º—ã –≤–ø–µ—Ä–≤—ã–µ —Ü–µ–ª—É–µ–º—Å—è –Ω–∞ –∫–∞–º–µ—Ä—É.jpg", caption: "–º—ã –≤–ø–µ—Ä–≤—ã–µ —Ü–µ–ª—É–µ–º—Å—è –Ω–∞ –∫–∞–º–µ—Ä—É" },
    { src: "–∞–±—Ö–∞–∑–∏—è.jpg", caption: "–∞–±—Ö–∞–∑–∏—è" },
    { src: "–æ—á–µ—Ä–µ–¥–Ω–æ–π –æ—Ç–¥—ã—Ö.jpg", caption: "–æ—á–µ—Ä–µ–¥–Ω–æ–π –æ—Ç–¥—ã—Ö" },
    { src: "—Ç—ã —Å—á–∞—Å—Ç–ª–∏–≤–∞.jpg", caption: "—Ç—ã —Å—á–∞—Å—Ç–ª–∏–≤–∞" },
    { src: "—è –Ω–µ –∑–Ω–∞—é —á—Ç–æ –º—ã —Ç—É—Ç –¥–µ–ª–∞–µ–º.jpg", caption: "—è –Ω–µ –∑–Ω–∞—é —á—Ç–æ –º—ã —Ç—É—Ç –¥–µ–ª–∞–µ–º" },
    { src: "–Ω–µ –º–æ–≥—É –ø–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —è —Ö–æ–∂—É —Ä—è–¥–æ–º —Å —Ç–∞–∫–æ–π –∫—Ä–∞—Å–æ—Ç–æ–π.jpg", caption: "–Ω–µ –º–æ–≥—É –ø–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —è —Ö–æ–∂—É —Ä—è–¥–æ–º —Å —Ç–∞–∫–æ–π –∫—Ä–∞—Å–æ—Ç–æ–π" },
    { src: "–µ—â–µ –æ–¥–Ω–∞ —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.jpg", caption: "–µ—â–µ –æ–¥–Ω–∞ —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏" },
    { src: "–≥–ª—É–±–æ–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –Ω–∞ –ª–∞–≤–æ—á–∫–µ.jpg", caption: "–≥–ª—É–±–æ–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –Ω–∞ –ª–∞–≤–æ—á–∫–µ" },
    { src: "—Å–Ω–æ–≤–∞ —Ç—ã, –º–Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω—Ä–∞–≤—è—Ç—Å—è —Ç–≤–æ–∏ —Ñ–æ—Ç–∫–∏.jpg", caption: "—Å–Ω–æ–≤–∞ —Ç—ã, –º–Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω—Ä–∞–≤—è—Ç—Å—è —Ç–≤–æ–∏ —Ñ–æ—Ç–∫–∏" },
    // –î–æ–±–∞–≤—å —Å–≤–æ–∏ —Ñ–∞–π–ª—ã –¥–∞–ª—å—à–µ (–¥–æ 16 –∏ –±–æ–ª—å—à–µ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏):
    // "photo7.jpg", "photo8.jpg", "photo9.jpg", "photo10.jpg",
    // "photo11.jpg","photo12.jpg","photo13.jpg","photo14.jpg","photo15.jpg","photo16.jpg"
  ];

  const galleryEl = document.getElementById('gallery');
  galleryEl.innerHTML = PHOTOS.map((p, i) =>
  `<figure style="margin:0;flex:0 0 88%;scroll-snap-align:center;">
     <img class="slide" src="${p.src}" alt="${p.caption}" data-idx="${i}">
     <figcaption style="text-align:center;margin-top:6px;font-size:14px;color:#5b3a52;">
       ${p.caption}
     </figcaption>
   </figure>`
).join('');

  const lightbox = document.getElementById('lightbox');
  const lbImg = document.getElementById('lightboxImg');
  const lbPrev = document.getElementById('lbPrev');
  const lbNext = document.getElementById('lbNext');
  const lbClose = document.getElementById('lbClose');
  const lbCounter = document.getElementById('lbCounter');
  let currentIndex = 0;

  function openLightbox(idx) {
    currentIndex = idx;
    lbImg.src = PHOTOS[currentIndex];
    lbCounter.textContent = `${currentIndex+1} / ${PHOTOS.length}`;
    lightbox.hidden = false;
    document.body.style.overflow = 'hidden';
  }
  function closeLightbox() {
    lightbox.hidden = true;
    document.body.style.overflow = '';
  }
  function show(delta) {
    currentIndex = (currentIndex + delta + PHOTOS.length) % PHOTOS.length;
    lbImg.src = PHOTOS[currentIndex];
    lbCounter.textContent = `${currentIndex+1} / ${PHOTOS.length}`;
  }

  galleryEl.addEventListener('click', (e) => {
    const img = e.target.closest('.slide');
    if (!img) return;
    openLightbox(Number(img.dataset.idx));
  });

  lbPrev.addEventListener('click', () => show(-1));
  lbNext.addEventListener('click', () => show(1));
  lbClose.addEventListener('click', closeLightbox);
  lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });

  // keyboard
  window.addEventListener('keydown', (e) => {
    if (lightbox.hidden) return;
    if (e.key === 'ArrowLeft') show(-1);
    if (e.key === 'ArrowRight') show(1);
    if (e.key === 'Escape') closeLightbox();
  });

  // swipe in lightbox
  let startX = 0;
  lbImg.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, {passive:true});
  lbImg.addEventListener('touchend', (e) => {
    const dx = e.changedTouches[0].clientX - startX;
    if (Math.abs(dx) > 40) show(dx > 0 ? -1 : 1);
  }, {passive:true});



    // --- Music toggle ---
    const music = document.getElementById('music');
    const toggle = document.getElementById('music-toggle');
    toggle.addEventListener('change', () => {
      if (toggle.checked) { music.volume = 0.25; music.play().catch(()=>{}); }
      else { music.pause(); }
    });

    // --- Touch helpers ---
    // allow double-tap confetti on mobile
    let lastTap = 0;
    window.addEventListener('touchend', (e) => {
      const now = Date.now();
      if (now - lastTap < 300) launchConfetti(120);
      lastTap = now;
    }, {passive: true});
  </script>
</body>
</html>
